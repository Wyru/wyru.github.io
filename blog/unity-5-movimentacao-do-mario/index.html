<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
<title>Como fazer a movimentação do Super Mario Bros na Unity - Will Saymon</title>
<meta name="description" content="Aprenda a fazer um sistema de movimentação semelhante ao de Super Mario Bros (NES) na Unity 5.">
<meta name="viewport" content="width=device-width, initial-scale=1">



    <meta name="generator" content="Hugo 0.55.6" />
    
<meta itemprop="name" content="Como fazer a movimentação do Super Mario Bros na Unity">
<meta itemprop="description" content="Aprenda a fazer um sistema de movimentação semelhante ao de Super Mario Bros (NES) na Unity 5.">


<meta itemprop="datePublished" content="2019-07-06T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2019-07-06T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="996">



<meta itemprop="keywords" content="" />

    <meta property="og:title" content="Como fazer a movimentação do Super Mario Bros na Unity" />
<meta property="og:description" content="Aprenda a fazer um sistema de movimentação semelhante ao de Super Mario Bros (NES) na Unity 5." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://willsaymon.com.br/blog/unity-5-movimentacao-do-mario/" />
<meta property="article:published_time" content="2019-07-06T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2019-07-06T00:00:00&#43;00:00"/>

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Como fazer a movimentação do Super Mario Bros na Unity"/>
<meta name="twitter:description" content="Aprenda a fazer um sistema de movimentação semelhante ao de Super Mario Bros (NES) na Unity 5."/>
<meta name="twitter:site" content="@willsaymon"/>

    

    
    <link rel="stylesheet"
        href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css">
    
    
    
    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.1.0/css/flag-icon.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css"
        integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.css" />
    <link rel="stylesheet" href="/css/main.min.css">
    <link rel="stylesheet" href="/css/add-on.css">
    <script src="https://kit.fontawesome.com/e94c0ea008.js"></script>
    
    <link rel="stylesheet" href="https://willsaymon.com.br/sass/main.min.css" media="screen">
    
    
    
</head>
  <body>
    
<header id="site-header">
  <nav id="site-nav">
    <h1 class="nav-title">
      <a href="/">
        
          
            Blog
          
        
      </a>
    </h1>
    <menu id="site-nav-menu" class="flyout-menu">
      
        <a href="/" class="link"><i class="fas fa-home">&nbsp;</i>Home</a>
      
        <a href="/curriculum" class="link"><i class="fas fa-scroll">&nbsp;</i>Curriculum</a>
      
        <a href="/portfolio" class="link"><i class="fas fa-gamepad">&nbsp;</i>Portfólio</a>
      
        <a href="/blog/" class="link"><i class="far fa-newspaper">&nbsp;</i>Blog</a>
      
      
      

    </menu>
    

    
    
    <a href="#site-nav" class="nav-toggle"><i class="fas fa-bars fa-2x"></i></a>
  </nav>
  
  
</header>

    <div id="wrapper">
      <section id="site-intro">
  <a href="/"><img src="/img/main/logo.jpg" class="circle" width="" alt="Will Saymon" /></a>
  <header>
    <h1>Will Saymon</h1>
  </header>
  <main>
    <p>You can't move others hearts, unless you can move your own.</p>
  </main>
  
    <footer>
      <ul class="social-icons">
        
        <li><a href="//github.com/wyru" target="_blank" rel="noopener" title="GitHub" class="fab fa-github"></a></li>











<li><a href="//linkedin.com/in/wsaymonoficial" target="_blank" rel="noopener" title="LinkedIn" class="fab fa-linkedin"></a></li>




<li><a href="//facebook.com/wsaymonoficial" target="_blank" rel="noopener" title="Facebook" class="fab fa-facebook"></a></li>




<li><a href="//api.whatsapp.com/send?phone=35998595938" target="_blank" rel="noopener" title="WhatsApp" class="fab fa-whatsapp"></a></li>



<li><a href="//instagram.com/i_will_say" target="_blank" rel="noopener" title="Instagram" class="fab fa-instagram"></a></li>

<li><a href="//twitter.com/willsaymon" target="_blank" rel="noopener" title="Twitter" class="fab fa-twitter"></a></li>








<li><a href="mailto:contato@willsaymon.com.br" target="_blank" title="Email" class="far fa-envelope"></a></li>

      </ul>
    </footer>
  
</section>

      <main id="site-main">
        <article class="post">
  <header>
  <div class="title">
    
        <h2><a href="/blog/unity-5-movimentacao-do-mario/">Como fazer a movimentação do Super Mario Bros na Unity</a></h2>
    
    
        <p>Aprenda a fazer um sistema de movimentação semelhante ao de Super Mario Bros (NES) na Unity 5.</p>
    
</div>
  <div class="meta">
    <time class="published" datetime="2019-07-06 00:00:00 &#43;0000 UTC">
      07/06/2019
    </time>
    <span class="author">Will Saymon</span>
    
  </div>
</header>

  <section id="social-share">
    



  
    <a href="//twitter.com/share?url=&amp;text=&amp" target="_blank" rel="noopener" class="share-btn twitter">
        <i class="fab fa-twitter"></i><p>&nbsp;Twitter</p>
      </a>
  

  
      <a href="//www.facebook.com/sharer/sharer.php?u=" target="_blank" rel="noopener" class="share-btn facebook">
        <i class="fab fa-facebook"></i><p>&nbsp;Facebook</p>
        </a>
  

  
        <a href="//www.linkedin.com/shareArticle?url=&amp;title=" target="_blank" rel="noopener" class="share-btn linkedin">
            <i class="fab fa-linkedin"></i><p>&nbsp;LinkedIn</p>
          </a>
  

  
        <a href="//www.pinterest.com/pin/create/button/?url=&amp;description=" target="_blank" rel="noopener" class="share-btn pinterest">
          <i class="fab fa-pinterest-p"></i><p>&nbsp;Pinterest</p>
        </a>
  


  </section>
  
<a href="/blog/unity-5-movimentacao-do-mario/" class="image featured">
  <img src="/img/2019/07/pic01.jpg" alt="Imagem do Mario na Unity">
</a>


  <div class="content">
    

<h1 id="como-fazer-o-sistema-de-movimentação-do-super-mario-bros-na-unity">Como fazer o sistema de movimentação do Super Mario Bros na Unity</h1>

<p>Você já implementou um sistema de movimentação na Unity e sentiu que ele estava meio… estranho? Os controles não pareciam tão responsivos ou a movimentação parecia artificial demais. Isso já aconteceu dezenas de vezes comigo, decidi então pesquisar mais sobre o assunto, ver o que há de diferente na movimentação em outros jogos, ver como outras pessoas costumam implementar o sistema de movimentação para jogos de plataforma.</p>

<p>Iniciei minha quest tentando reproduzir a movimentação do Super Mario World. A jornada começou estudando quais suas peculiaridades e o que faz a movimentação ser tão responsiva mesmo em um controle limitado como o do Nintendinho, depois de um tempo pesquisando e vendo alguns vídeos que vou deixar como referência no fim da publicação, cheguei a alguns pontos principais:</p>

<ul>
<li>Assim que o jogador pressionar para o Mario se mover ele leva alguns instantes para atingir sua velocidade máxima, logo deve ser possível configurar uma <strong>velocidade máxima</strong> e um <strong>tempo de aceleração</strong>;</li>
<li>A mesma ideia acima aplica-se ao sistema de corrida, mas pelos meus testes caso mário esteja em sua velocidade máxima normal e comece a correr ele já atinge a velocidade máxima de corrida, sendo assim precisamos apenas de uma parâmetro para configurar a <strong>velocidade máxima da corrida</strong>.</li>
<li>A velocidade que o Mario possui antes do pulo influencia muito mais na trajetória do pulo do que os comandos de movimentação horizontal realizados com ele no ar. Logo deve ser possível configurar uma <strong>taxa de movimentação no ar</strong>.</li>
<li>Ao pular, o Mario possui uma altura mínima do pulo e caso o jogador permaneça com o botão de pulo pressionado ele excede essa altura até um limite máximo. Logo devemos poder configurar a <strong>força do pulo</strong> e o quão alto ele irá caso permaneça com o botão pressionado.</li>
<li>Caso o Mario colida com algum objeto no ar, sua velocidade naquela direção é zerada.</li>
</ul>

<p>Existem mais pontos da movimentação do encanador, mas acredito que com apenas estes seja possível já fazer um jogo que seja bem mais cativante de jogar. Começando do começo, vou apresentar para vocês como fazer um sistema de movimentação bem cru, então iremos iterar em cima dele para fazer algo glorioso(ou não).</p>

<h2 id="preparando-nossa-cena">Preparando nossa Cena</h2>

<p>Primeira coisa que iremos fazer é criar um novo projeto 2D na Unity, no meu caso estou usando a Unity 2019.1.4f1, mas acredito que deve funcionar nas outras versões. Com o projeto criado temos que criar algo que represente nosso personagem e o chão, você pode baixar algum sprite que quiser ou apenas usar um quadrado criado na unity mesmo. Caso queira criar um sprite pela unity, basta ir na janela que exibe os arquivos do projeto, clicar com o botão direito do mouse e selecionar Create &gt; Sprites &gt; Square. Assim podemos criar nosso player, crie um objeto vazio clicando com o botão direito do mouse no inspector e selecionando Create Empty.</p>

<p><img src="/img/2019/07/post01/01.png" alt="Como criar um objeto vazio" /></p>

<p>Vamos adicionar os seguintes componentes a ele:</p>

<ul>
<li><p><strong>Sprite Renderer:</strong> Componente responsável por renderizar sprites na tela baseado na posição do objeto em que ele foi adicionado.</p></li>

<li><p><strong>Rigidbody2D:</strong> Componente responsável por fazer cálculos de física e simular gravidade para o objeto em que ele foi adicionado</p></li>

<li><p><strong>BoxCollider2D:</strong> Componente responsável por dizer as simulações de física qual o espaço ocupado por aquele objeto, digamos que ele diga qual o formato do corpo do objeto. Neste caso o BoxCollider só criar corpos em forma de caixa.</p></li>
</ul>

<p>Você terá algo muito semelhante ao da imagem abaixo. Mudei a cor do player para vermelha apenas indo no Sprite Renderer e alterando o parâmetro Color. Também renomeie o objeto para um nome que diga mais sobre ele, coloquei “Player”.</p>

<p><img src="/img/2019/07/post01/02.png" alt="Objeto com os componentes" /></p>

<p>Faremos a mesma coisa para o chão, mas como ele será algo estático não é necessário adicionarmos o component Rigidbody2D, agora só aumentar seu tamanho, e arrastá-lo para baixo. Ao dar play no jogo seu cubo deve estar caindo e ficando sobre o chão.</p>

<p><img src="/img/2019/07/post01/03.gif" alt="Objeto caindo na plataforma" /></p>

<p>Agora meus amigos, é hora de codar!</p>

<p><img src="/img/gifs/JimCarrey01.gif" alt="Gif do Jim Carrey digitando" /></p>

<p>Daria pra fazer tudo em um script só, mas como somos ótimos programadores iremos respeitar(mas não muito) os conceitos SOLID. Vamos precisar de um script que irá controlar os comandos dados pelo usuário, um para controlar a movimentação do player e um para checar se algum objeto na camada de física selecionada está no espaço informado, você irá entender melhor mais pra frente, mas vamos usar isso para saber se o player está no chão.</p>

<p>Daremos o nome de <strong>InputController</strong> para o script que irá detectar os comandos dados pelo jogador e <strong>PlayerMovement</strong> o script responsável por movimentar o jogador.</p>

<p>Com o InputController obteremos o input horizontal dado pelo jogador, para isso utilizaremos o método <strong>GetAxis</strong> da classe <strong>Input</strong>, ela retorna um valor que vai de -1 a 1, sendo -1 uma analógico completamente para a esquerda, 0 analógico parado e 1 o analógico completamente para a direita. Esse valor nós mandaremos para o PlayerMovement que movimentará o player.</p>

<pre><code class="language-csharp">using UnityEngine;

public class InputController : MonoBehaviour
{
    public PlayerMovement player;

    void Update()
    {
        float horizontalInput =  Input.GetAxis(&quot;Horizontal&quot;);
        player.SetHorizontalInput(horizontalInput);
    }
}
</code></pre>

<pre><code class="language-csharp">using UnityEngine;

public class PlayerMovement : MonoBehaviour
{
    [Header(&quot;Horizontal Movement Param&quot;)] // Utilizar o Attribute Header faz com que aparece um título no inspector da Unity
    [SerializeField] float speed = 1f; // SerializeField faz aparecer uma variável privada no inspector, caso ela seja pública já aparece por padrão

    Rigidbody2D m_Rigidbody;

    float horizontalSpeed;
    float input;

    private void Start() // Start é executado uma vez sempre que um objeto que contem esta classe é criado na cena
    {
        m_Rigidbody = GetComponent&lt;Rigidbody2D&gt;(); // GetComponent é um método que pega um componente do gameobject em que este script está rodando
    }

    private void FixedUpdate() // FixedUpdate executa exatamente 50 vezes por segundo
    {
        UpdateHorizontalSpeed();
        m_Rigidbody.velocity = new Vector2(horizontalSpeed, m_Rigidbody.velocity.y);
    }

    public void SetHorizontalInput(float input)
    {
        this.input = input;
    }

    void UpdateHorizontalSpeed()
    {
        horizontalSpeed = speed * input;
    }
}
</code></pre>

<p>Agora adicionaremos ambos scripts ao game object do player e se tudo deu certo nosso quadradinho estará se movimentando.</p>

<p><img src="/img/2019/07/post01/04.gif" alt="Objeto caindo na plataforma" /></p>

  </div>
  <footer>
    <ul class="stats">
  
    
    
      <li class="categories">
        <ul>
          
            
            <li><a class="article-category-link" href="https://willsaymon.com.br/categories/unity-5">Unity 5</a></li>
          
            
            <li><a class="article-category-link" href="https://willsaymon.com.br/categories/iniciantes">Iniciantes</a></li>
          
        </ul>
      </li>
    
  
  
    <li class="tags">
      <ul>
        <li>None</li>
      </ul>
    </li>
  
</ul>

  </footer>
</article>
<article class="post">
  

</article>
<div class="pagination">
  
  
</div>


      </main>
      <section id="site-sidebar">
  <section id="recent-posts">
    <header>
      <h1>Publicações recentes</h1>
    </header>
    
    <article class="mini-post">
      <section>
        
<a href="/blog/unity-5-movimentacao-do-mario/" class="image featured">
  <img src="/img/2019/07/pic01.jpg" alt="Imagem do Mario na Unity">
</a>


      </section>
      <header>
        <h1><a href="/blog/unity-5-movimentacao-do-mario/">Como fazer a movimentação do Super Mario Bros na Unity</a></h1>
        <time class="published" datetime="">07/06/2019</time>
      </header>
    </article>
    
    
  </section>

  
    
      <section id="categories">
        <header>
          <h1><a href="/categories">Categorias</a></h1>
        </header>
        <ul>
          
            
          
          
          <li>
            
              <a href="/categories/iniciantes/">iniciantes<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/categories/unity-5/">unity-5<span class="count">1</span></a>
            
          
          </li>
        </ul>
      </section>
    
  

  <section id="mini-bio">
    <header>
      <h1>Sobre</h1>
    </header>
    <p>test</p>
    <footer>
      <a href="/about" class="button">Aprenda mais</a>
    </footer>
  </section>
</section>

      <footer id="site-footer">
  
      <ul class="social-icons">
        
        <li><a href="//github.com/wyru" target="_blank" rel="noopener" title="GitHub" class="fab fa-github"></a></li>











<li><a href="//linkedin.com/in/wsaymonoficial" target="_blank" rel="noopener" title="LinkedIn" class="fab fa-linkedin"></a></li>




<li><a href="//facebook.com/wsaymonoficial" target="_blank" rel="noopener" title="Facebook" class="fab fa-facebook"></a></li>




<li><a href="//api.whatsapp.com/send?phone=35998595938" target="_blank" rel="noopener" title="WhatsApp" class="fab fa-whatsapp"></a></li>



<li><a href="//instagram.com/i_will_say" target="_blank" rel="noopener" title="Instagram" class="fab fa-instagram"></a></li>

<li><a href="//twitter.com/willsaymon" target="_blank" rel="noopener" title="Twitter" class="fab fa-twitter"></a></li>








<li><a href="mailto:contato@willsaymon.com.br" target="_blank" title="Email" class="far fa-envelope"></a></li>

      </ul>
  
  <p class="copyright">
    
      &copy; 2019
      
        Will Saymon
      
    .
    Powered by <a href="//gohugo.io" target="_blank" rel="noopener">Hugo</a>
  </p>
</footer>
<a id="back-to-top" href="#" class="fas fa-arrow-up fa-2x"></a>

      
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/html.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/css.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/js.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/toml.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>


  
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.js"></script>
  <script src=/js/util.js></script>
  <script src=/js/main.js></script>
  <script src=/js/add-on.js></script>
  


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-143400458-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


    </div>
  </body>
</html>
